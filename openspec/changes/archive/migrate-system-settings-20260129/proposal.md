# 提案：补全系统设置迁移与权限数据种植

## 变更ID
`migrate-system-settings`

## 为什么

系统设置模块（用户管理、角色管理、菜单管理、权限管理）的Go后端Handler/Service/Repository层代码已完成基础实现，但存在以下缺口：

1. **业务逻辑差异**：Python原版中角色/菜单编辑仅允许在禁用状态下操作（防止启用中的角色/菜单被误改），Go端未实现此守卫逻辑；新建角色默认状态Python为禁用(1)，Go未统一。
2. **菜单排序约束**：Python在菜单编辑时检查同parent下sort_order唯一性，Go端缺此校验。
3. **权限数据缺失**：数据库中尚未种植菜单表和权限表数据，导致前端菜单不可见、权限控制无法生效。

## 变更内容

### A. 修复RBAC业务逻辑（与Python行为对齐）

1. 新建角色默认状态设为1（禁用），需显式启用才能使用
2. 角色编辑和权限分配仅允许在角色禁用状态下操作
3. 菜单编辑仅允许在菜单禁用状态下操作
4. 菜单编辑时校验同parent_id下sort_order唯一性

### B. 创建数据库种植脚本

将backup中的完整菜单表和权限表数据提取为种植SQL脚本，包含：
- 全部菜单（一级+二级），共22条菜单记录
- 全部权限，共43条权限记录

脚本使用 `INSERT IGNORE` 确保幂等性，可安全重复执行。

## 验收标准

- 新建角色默认为禁用状态
- 启用中的角色不可编辑信息和权限
- 启用中的菜单不可编辑
- 菜单编辑时sort_order重复会报错
- 种植脚本执行后，前端可见全部系统菜单和权限树
- 品牌/分类/属性/商品管理的权限数据正确种植
